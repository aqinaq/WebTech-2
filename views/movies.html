<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>CineShelf - Movies CRUD</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>

<nav>
  <a href="/">Home</a> |
  <a href="/movies">Movies</a> |
  <a href="/favorites">Favorites</a> |
  <a href="/profile">Profile</a> |
  <a href="/about">About</a> |
  <a href="/contact">Contact</a>
</nav>

<header>
  <h1>Movies (CRUD)</h1>
  <p>Create, update, delete movies directly from the web interface</p>

  <!-- NEW: Auth bar -->
  <div id="authBar" style="margin-top:10px;">
    <span id="authStatus">Checking login...</span>
    <a id="loginLink" href="/login" style="margin-left:10px; display:none;">Login</a>
    <button id="logoutBtn" type="button" style="margin-left:10px; display:none;">Logout</button>
  </div>

  <!-- NEW: Warning for unauthorized users -->
  <p id="authWarning" style="display:none; color:red; margin-top:10px;">
    Please login to create/update/delete movies.
    <a href="/login">Go to login</a>
  </p>
</header>

<section>
  <h2>Add / Edit Movie</h2>

  <form id="movieForm">
    <input type="hidden" id="movieId" />

    <label for="title">Title</label>
    <input type="text" id="title" required />

    <label for="genre">Genre</label>
    <input type="text" id="genre" required />

    <label for="year">Year</label>
    <input type="number" id="year" required />

    <label for="description">Description</label>
    <textarea id="description" rows="4" required></textarea>

    <button id="submitBtn" type="submit" class="details-btn">Add Movie</button>
    <button id="cancelBtn" type="button" class="details-btn" style="display:none; background:#444;">
      Cancel
    </button>
  </form>
</section>

<section>
  <h2>Movies List</h2>

  <div style="overflow-x:auto;">
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="text-align:left; border-bottom:1px solid #333;">
          <th style="padding:10px 6px;">Title</th>
          <th style="padding:10px 6px;">Genre</th>
          <th style="padding:10px 6px;">Year</th>
          <th style="padding:10px 6px;">Description</th>
          <th style="padding:10px 6px;">Actions</th>
        </tr>
      </thead>
      <tbody id="moviesBody"></tbody>
    </table>
  </div>
</section>

<footer>
  <p>&copy; 2025 CineShelf â€¢ SE-2426</p>
</footer>

<script src="/movies.js"></script>
</body>
</html>
